{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Bedrock Miniserver Configuration",
  "type": "object",
  "properties": {
    "port": { 
      "type": ["integer", "string"], 
      "default": 8080,
      "minimum": 1,
      "maximum": 65535
    },
    "_config_path": true,
    "log_level": { 
      "enum": ["debug", "info", "notice", "warn", "error", "fatal"],
      "default": "info"
    },
    "env": { 
      "type": "object", 
      "additionalProperties": { "type": "string" } 
    },
    "parse_templates": { "type": "boolean", "default": false },
    "template_extensions": {
      "type": "array",
      "items": { "type": "string" },
      "default": ["roc", "rock", "jroc", "jrock"]
    },
    "no_cache": { "type": "boolean", "default": false },
    "directory_index": {
      "type": "object",
      "additionalProperties": {
        "oneOf": [
          { "type": "string" },
          { "type": "array", "items": { "type": "string" } }
        ]
      }
    },
    "aliases": { 
      "type": "object", 
      "additionalProperties": { "type": "string" } 
    },
    "services": { 
      "type": "object", 
      "additionalProperties": { "type": "string" } 
    },
    "routes": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": { "type": "string" }
      }
    },
    "session": {
      "type": "object",
      "required": ["module"],
      "properties": {
        "module": { "type": "string" },
        "enabled": { "type":  ["boolean", "string"] },
        "binding": { "type": "string" },
        "config": { "type": "object" }
      }
    },
    "overrides": { "type": "object" },
    "service_config": { "type": "object" },
    "mime_types": {
      "type": "object",
      "additionalProperties": { "type": "string" }
    },
    "error_document": {
      "type": "object",
      "additionalProperties": { "type": "string" }
    },
    "mount_point": { "type": "string", "default": "/" }
  },
  "additionalProperties": false
}
