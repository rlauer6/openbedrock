---
name: <sqlselect>
test: |
  <try>
    <null:dsn dbi:mysql:bedrock:%s>

    <null:host --default=localhost $env.DBI_HOST>

    <array:args $dsn.sprintf($host)>
    
    <if $env.DBI_SOCKET>
       <null $args.push('mysql_socket', $env.DBI_SOCKET)>
    </if>
    
    <sqlconnect:dbi --username=fred --password=flintstone $args>

    <sqlselect --db="dbi" "describe foo">
    <var $Field>,<var $Type>,<var $Null>,<var $Key>,<var $Extra></sqlselect>
  <catch>
    <var $@>
  </try>
result: /id,int/s
op: like
---
name: <sqlselect>
test: |
  <try>
    <sqlselect:login "select * from session"><var $session>
    </sqlselect>
  <catch>
    <var $@>
  </try>
result: /[\da-f]{32}/
op: like
