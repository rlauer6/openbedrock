# ident "@(#) $Header$"
# ident "@(#)        $Name$"

#
#    This file is a part of Bedrock, a server-side web scripting tool.
#    Check out http://www.openbedrock.org
#    Copyright (C) 2001, Charles Jones, LLC.
#
#    This program is free software; you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation; either version 2 of the License, or
#    any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program; if not, write to the Free Software
#    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
#

use strict;
# This should probably be replaced with something a little more standard

package BLM::PDF::Log;

my $log = 1;

sub loggingOn { $log = shift; }

sub Log
{
   return unless defined($log) && $log;

   my $arglength = @_;

   my $this = $_[0];
   shift() if ref($this);
   my ($text, $args) = @_;

   if( ref($this) )
   {
      print(STDERR "Referenced to log used.\n");
   }
   else
   {
      my ($package, $filename, $line, $subroutine, $hasargs, 
          $wantarray, $evaltext, $is_require) = caller();

      $package = "<unknown>" if !defined($package);
      $line = -1 if !defined($line);
      $subroutine = "<unknown>" if !defined($subroutine);
      $hasargs = 0 if !defined($hasargs);
      $args = [] if !defined($args);
      $wantarray = 0 if !defined($wantarray);

      my $date = `date`;
      chop($date);

      print(STDERR 
          "$$|$date|Line $line of $filename|${package}::${subroutine}(" .
	   (defined(@$args) ? join(",", @$args) : "") .
           ") wantarray(" . ($wantarray eq "1" ? 1 : 0) . ")|\n   => $text\n");
   }
} # sub log

1;

#
# Name of Release: $Name$
# $Log$
# Revision 1.3  2001/02/14 15:35:44  sridhar
# Added copyright and GPL notice
#
# Revision 1.2  2001/02/14 15:24:41  sridhar
# added CVS headers and trailers
#
#
