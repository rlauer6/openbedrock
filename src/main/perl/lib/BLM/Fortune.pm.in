#!/usr/local/bin/perl -w

# ident "@(#) $Header$"
# ident "@(#)        $Name$"

package BLM::Fortune;

use strict;
use vars qw($FORTUNE_DIR);
*FORTUNE_DIR = \ "/usr/share/games/fortunes";

BEGIN
{
    use Exporter ();
    use vars	qw ($VERSION @ISA);
    $VERSION	= do { my @r = (q$Revision$ =~ /\d+/g); sprintf "%d."."%02d" x $#r, @r };
}

use TagX::Log 1.01;
use SIS::Hash 1.01;
@ISA = qw(SIS::Hash);

sub getCookie
{
    opendir( DIR, $FORTUNE_DIR ) || die "Could not open $FORTUNE_DIR: $!\n";
    my @files = map { s!^!$FORTUNE_DIR/!o; $_; } grep(!/(\.\.?|\.dat)$/, readdir( DIR ));
    my $file = $files[rand scalar(@files)];
    open( FILE, $file ) || die "Could not open $file: $!\n";
    my $contents = do {
	local($/) = undef;
	<FILE>;
    };
    close FILE;
    my @cookies = split (/^%$/m, $contents);
    $cookies[rand $#cookies];
}

1;

#
# Name of Release: $Name$
# $Log$
# Revision 1.1  2000/09/18 18:30:13  sridhar
# Moving some general purpose BLMs from Perl/BLM to Perl/Bedrock/BLM
#
# Revision 1.1  2000/07/18 19:02:45  sridhar
# Adding BLM::Fortune for Lighter Times around the block
#
#
